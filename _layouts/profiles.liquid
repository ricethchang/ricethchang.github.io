---
layout: page
---
<div class="post">
  <article>
    {%- if page.categories and page.profiles -%}
      {%- for category in page.categories -%}
        {%- assign category_profiles = page.profiles | where: 'category', category.id -%}
        {%- if category_profiles.size > 0 -%}
          <section class="profile-section">
            <h2 class="category-title">{{ category.name }}</h2>
            {%- if category.description -%}
              <p class="category-desc">{{ category.description }}</p>
            {%- endif -%}

            {%- if category.id == 'pi' -%}
              {%- comment -%}Use original PI layout (no cards){%- endcomment -%}
              {%- for profile in category_profiles -%}
                <hr>
                <div class="profile float-{% if profile.align == 'left' %}left{% else %}right{% endif %}">
                  {%- if profile.image -%}
                    {%- assign profile_image_path = profile.image | prepend: 'assets/img/' -%}
                    {%- if profile.image_circular -%}
                      {%- assign profile_image_class = 'img-fluid z-depth-1 rounded-circle' -%}
                    {%- else -%}
                      {%- assign profile_image_class = 'img-fluid z-depth-1 rounded' -%}
                    {%- endif -%}
                    {%- capture sizes -%}(min-width: {{ site.max_width }})
                      {{ site.max_width | minus: 30 | times: 0.3 }}px,
                      (min-width: 576px) 30vw,
                      95vw{%- endcapture -%}
                    {% include figure.liquid loading="eager" path=profile_image_path class=profile_image_class sizes=sizes alt=profile.image %}
                  {%- endif -%}
                  {%- if profile.more_info -%}
                    <div class="more-info">{{ profile.more_info }}</div>
                  {%- endif -%}
                </div>

                <div class="clearfix">
                  {%- if profile.content -%}
                    {%- capture profile_content -%}{% include_relative {{ profile.content }} %}{%- endcapture -%}
                    {{ profile_content | markdownify }}
                  {%- else -%}
                    {{ content }}
                  {%- endif -%}
                </div>
              {%- endfor -%}
            {%- else -%}
              <div class="row row-cols-1 row-cols-md-2">
                {%- for profile in category_profiles -%}
                  <div class="col mb-4">
                    <div class="card h-100 hoverable profile-card profile-card-postcard">
                      <div class="row no-gutters h-100">
                        {%- if profile.image -%}
                          <div class="col-5 col-md-5 profile-postcard-image-col">
                            <div class="profile-image-wrapper profile-image-with-name">
                              {%- assign profile_image_path = profile.image | prepend: 'assets/img/' -%}
                              {%- if profile.image_circular -%}
                                {%- assign profile_image_class = 'img-fluid z-depth-1 rounded-circle' -%}
                              {%- else -%}
                                {%- assign profile_image_class = 'img-fluid z-depth-1' -%}
                              {%- endif -%}
                              {%
                                include figure.liquid
                                loading="eager"
                                path=profile_image_path
                                sizes="(min-width: 768px) 280px, 50vw"
                                alt=profile.image
                                class=profile_image_class
                              %}
                              {%- if profile.name -%}
                                <div class="profile-name-overlay">{{ profile.name }}</div>
                              {%- endif -%}
                            </div>
                          </div>
                        {%- endif -%}

                        <div class="{% if profile.image %}col-7 col-md-7{% else %}col-12{% endif %} d-flex flex-column">
                          <div class="card-body profile-postcard-body flex-grow-1">
                            <div class="profile-postcard-content">
                              {%- if profile.name -%}
                                {%- unless profile.image -%}
                                  <div class="profile-postcard-name">{{ profile.name }}</div>
                                {%- endunless -%}
                              {%- endif -%}
                              {%- if profile.content -%}
                                {%- capture profile_content -%}{% include_relative {{ profile.content }} %}{%- endcapture -%}
                                {{ profile_content | markdownify }}
                              {%- else -%}
                                {{ content }}
                              {%- endif -%}

                              {%- if profile.more_info -%}
                                <div class="more-info mt-2">{{ profile.more_info }}</div>
                              {%- endif -%}
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                {%- endfor -%}
              </div>
            {%- endif -%}
          </section>
        {%- endif -%}
      {%- endfor -%}
    {%- elsif page.profiles -%}
      {%- comment -%}
        Fallback: original single-column layout if categories are not defined.
      {%- endcomment -%}
      {%- for profile in page.profiles -%}
        <hr>
        <div class="profile float-{% if profile.align == 'left' %}left{% else %}right{% endif %}">
          {%- if profile.image -%}
            {%- assign profile_image_path = profile.image | prepend: 'assets/img/' -%}
            {%- if profile.image_circular -%}
              {%- assign profile_image_class = 'img-fluid z-depth-1 rounded-circle' -%}
            {%- else -%}
              {%- assign profile_image_class = 'img-fluid z-depth-1 rounded' -%}
            {%- endif -%}
            {%- capture sizes -%}(min-width: {{ site.max_width }}) {{ site.max_width | minus: 30 | times: 0.3}}px, (min-width: 576px) 30vw, 95vw"{%- endcapture -%}
            {% include figure.liquid loading="eager" path=profile_image_path class=profile_image_class sizes=sizes alt=profile.image %}
          {%- endif -%}
          {%- if profile.more_info -%}
            <div class="more-info">{{ profile.more_info }}</div>
          {%- endif -%}
        </div>

        <div class="clearfix">
          {%- if profile.content -%}
            {%- capture profile_content -%}{% include_relative {{ profile.content }} %}{%- endcapture -%}
            {{ profile_content | markdownify }}
          {%- else -%}
            {{ content }}
          {%- endif -%}
        </div>
      {%- endfor -%}
    {%- endif -%}
  </article>
</div>
